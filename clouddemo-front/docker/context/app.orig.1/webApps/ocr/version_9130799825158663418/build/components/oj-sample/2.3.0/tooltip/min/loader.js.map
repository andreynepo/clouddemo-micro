{"version":3,"sources":["text!oj-sample/tooltip/tooltip-view.html","tooltip/resources/nls/tooltip-strings.js","tooltip/tooltip-viewModel.js","text!oj-sample/tooltip/component.json","css!oj-sample/tooltip/tooltip-styles","tooltip/loader.js","../../../../../../../../../../../../../onLayerEnd0.js"],"names":["define","root","ojContext","ko","componentStrings","TooltipComponentModel","context","self","this","composite","element","loggingIdentity","uniqueId","contentSubId","popupSubId","properties","res","ojsampleTooltip","isVBCSDT","observable","_detectDTMode","setupComplete","Promise","resolve","markSetupComplete","prototype","bindingsApplied","connected","then","popupElement","document","getElementById","callbackClearTimeout","_handleClearTimeout","bind","callbackSetTimeout","_handleSetTimeout","addEventListener","_callbackOpen","_handleOpen","_callbackClose","_handleClose","callbackOpen","disconnected","removeEventListener","refresh","show","open","event","openInProgress","setTimeout","target","openDelay","isOpen","close","_timeoutId","window","displayDuration","timeoutId","clearTimeout","hide","component","getAttribute","Composite","view","viewModel","metadata","register","JSON","parse","c","d","a","i","s","createElement","type","getElementsByTagName","cssText","createTextNode"],"mappings":"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","file":"loader.js","sourcesContent":["\ndefine('text!oj-sample/tooltip/tooltip-view.html',[],function () { return '<!--\\n  tooltip\\n  Copyright (c) 2019, Oracle and/or its affiliates.\\n  The Universal Permissive License (UPL), Version 1.0\\n-->\\n<div :id=\"[[contentSubId]]\">\\n  <oj-bind-slot>\\n    <oj-bind-if test=\"[[isVBCSDT()]]\">\\n      <span class=\"tooltipDesignTimeMarker\">\\n        <oj-bind-text value=\"[[res.designTimeMarker]]\"></oj-bind-text>\\n      </span>\\n    </oj-bind-if>\\n  </oj-bind-slot>\\n  <oj-popup :id=\"[[popupSubId]]\" style=\"display:none; max-width:340px\" initial-focus=\"none\" auto-dismiss=\"focusLoss\"\\n    modality=\"modeless\"\\n    position=\"[[{my:{horizontal:\\'start\\',vertical:\\'top\\'},offset:{x:0, y:10},at:{horizontal:\\'start\\',vertical:\\'end\\'}}]]\">\\n    <oj-bind-slot name=\"tooltip\">\\n      <span>\\n        <oj-bind-text value=\"[[res.placeholder]]\"></oj-bind-text>\\n      </span>\\n    </oj-bind-slot>\\n  </oj-popup>\\n</div>';});\n\n","/* Copyright 2019, Oracle and/or its affiliates. All rights reserved. */\n/*\n * Standard String resources used within the component\n */\ndefine('oj-sample/tooltip/resources/nls/tooltip-strings',{\n  \"root\": true\n});\n\n","/**\n  Copyright (c) 2019, Oracle and/or its affiliates.\n  The Universal Permissive License (UPL), Version 1.0\n*/\n'use strict';\ndefine(\n    'oj-sample/tooltip/tooltip-viewModel',['ojs/ojcontext', 'knockout', 'ojL10n!./resources/nls/tooltip-strings', 'ojs/ojpopup'], function (ojContext, ko, componentStrings) {\n\n        function TooltipComponentModel(context) {\n            var self = this;\n            self.composite = context.element;\n            self.loggingIdentity = 'oj-sample-tooltip (' + context.uniqueId + '): ';\n            self.contentSubId = context.uniqueId + '-content';\n            self.popupSubId = context.uniqueId + '-popup';\n            self.properties = context.properties;\n            self.res = componentStrings.ojsampleTooltip;\n            self.isVBCSDT = ko.observable(self._detectDTMode(context.element));\n\n            self.setupComplete = new Promise(function (resolve) {\n                self.markSetupComplete = resolve;\n            });\n        }\n\n        TooltipComponentModel.prototype.bindingsApplied = function (context) {\n            var self = this;\n            self.markSetupComplete();\n            delete self.markSetupComplete;\n        }\n\n        TooltipComponentModel.prototype.connected = function (context) {\n            var self = this;\n            self.setupComplete.then(function () {\n                if (!self.popupElement) {\n                    self.popupElement = document.getElementById(self.popupSubId);\n                    var callbackClearTimeout = self._handleClearTimeout.bind(self);\n                    var callbackSetTimeout = self._handleSetTimeout.bind(self);\n                    self.popupElement.addEventListener(\"ojOpen\", callbackSetTimeout);\n                    self.popupElement.addEventListener(\"ojBeforeClose\", callbackClearTimeout);\n                    self.popupElement.addEventListener(\"ojFocus\", callbackClearTimeout);\n                    self._callbackOpen = self._handleOpen.bind(self);\n                    self._callbackClose = self._handleClose.bind(self);\n                }\n                var callbackOpen = self._callbackOpen\n                self.composite.addEventListener(\"mouseenter\", callbackOpen, true);\n                self.composite.addEventListener(\"focus\", callbackOpen, true);\n            });\n        };\n\n        TooltipComponentModel.prototype.disconnected = function (context) {\n            var self = this;\n            if (self.popupElement) {\n                var callbackOpen = self._callbackOpen\n                self.composite.removeEventListener(\"mouseenter\", callbackOpen, true);\n                self.composite.removeEventListener(\"focus\", callbackOpen, true);\n            }\n        };\n\n        TooltipComponentModel.prototype.refresh = function () {\n            var self = this;\n            self.isVBCSDT(self._detectDTMode(self.composite));\n        };\n\n        TooltipComponentModel.prototype.show = function () {\n            var self = this;\n            self.popupElement.open(self.composite);\n        };\n\n        TooltipComponentModel.prototype._handleOpen = function (event) {\n            var self = this;\n            if (!self.openInProgress) {\n                self.openInProgress = true;\n                setTimeout(function () {\n                    self.popupElement.open(event.target);\n                }.bind(this),\n                    self.properties.openDelay);\n            }\n        };\n\n        TooltipComponentModel.prototype._handleClose = function (event) {\n            var self = this;\n            var isOpen = !self.popupElement.isOpen();\n            if (!isOpen) {\n                self.popupElement.close();\n            }\n        };\n\n        TooltipComponentModel.prototype._handleSetTimeout = function (event) {\n            var self = this;\n            self._timeoutId = window.setTimeout(self._callbackClose, self.properties.displayDuration);\n            if (self.openInProgress) {\n                self.openInProgress = false;\n            }\n        };\n\n        TooltipComponentModel.prototype._handleClearTimeout = function (event) {\n            var self = this;\n            var timeoutId = self._timeoutId;\n            delete self._timeoutId;\n            window.clearTimeout(timeoutId);\n        };\n\n        TooltipComponentModel.prototype.hide = function () {\n            var self = this;\n            // no-op\n        };\n\n        TooltipComponentModel.prototype._detectDTMode = function (component) {\n            if (component.getAttribute('data-vbdt-component')) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        return TooltipComponentModel;\n    });\n","\ndefine('text!oj-sample/tooltip/component.json',[],function () { return '{\\r\\n  \"name\": \"tooltip\",\\r\\n  \"pack\": \"oj-sample\",\\r\\n  \"displayName\": \"Tooltip\",\\r\\n  \"description\": \"Component that associates a popup tooltip with a read-only element on the page\",\\r\\n  \"license\": \"https://opensource.org/licenses/UPL\",\\r\\n  \"version\": \"1.0.2\",\\r\\n  \"jetVersion\": \">=6.1.0 <8.0.0\",\\r\\n  \"icon\": {\\r\\n    \"iconPath\": \"extension/images/cca-tooltip.svg\",\\r\\n    \"selectedIconPath\": \"extension/images/cca-tooltip.svg\",\\r\\n    \"hoverIconPath\": \"extension/images/cca-tooltip-ovr.svg\"\\r\\n  },\\r\\n  \"properties\": {\\r\\n    \"openDelay\": {\\r\\n      \"displayName\": \"Delay\",\\r\\n      \"description\": \"The amount of time in milliseconds before the popup appears\",\\r\\n      \"type\": \"number\",\\r\\n      \"value\": 500\\r\\n    },\\r\\n    \"displayDuration\": {\\r\\n      \"displayName\": \"Duration\",\\r\\n      \"description\": \"The amount of time in milliseconds before the popup disappears of its own accord\",\\r\\n      \"type\": \"number\",\\r\\n      \"value\": 3000\\r\\n    }\\r\\n  },\\r\\n  \"methods\": {\\r\\n    \"show\": {\\r\\n      \"displayName\": \"Show\",\\r\\n      \"description\": \"Forces the tooltip to display\"\\r\\n    },\\r\\n    \"hide\": {\\r\\n      \"displayName\": \"Hide\",\\r\\n      \"description\": \"Forces the tooltip to hide if it is currently displayed\"\\r\\n    },\\r\\n    \"refresh\": {\\r\\n      \"displayName\": \"Refresh\",\\r\\n      \"description\": \"Only used at design time\"\\r\\n    }\\r\\n  },\\r\\n  \"slots\": {\\r\\n    \"\": {\\r\\n      \"displayName\": \"Contents\",\\r\\n      \"description\": \"The text or image that will be the hot-zone for the tooltip\"\\r\\n    },\\r\\n    \"tooltip\": {\\r\\n      \"displayName\": \"Tooltip\",\\r\\n      \"description\": \"The contents that will be displayed in the tooltip popup\"\\r\\n    }\\r\\n  },\\r\\n  \"extension\": {\\r\\n    \"catalog\": {\\r\\n      \"category\": \"Sample Components\",\\r\\n      \"tags\": [\\r\\n        \"VBCS\",\\r\\n        \"Form Factor: Web\",\\r\\n        \"Form Factor: Tablet\"\\r\\n      ],\\r\\n      \"coverImage\": \"extension/images/cca-tooltip.svg\"\\r\\n    },\\r\\n    \"vbdt\": {\\r\\n      \"pi\": {\\r\\n        \"layouts\": {\\r\\n          \"general\": {\\r\\n            \"customizers\": [\\r\\n              {\\r\\n                \"propertyName\": \"openDelay\"\\r\\n              },\\r\\n              {\\r\\n                \"propertyName\": \"displayDuration\"\\r\\n              }\\r\\n            ]\\r\\n          }\\r\\n        }\\r\\n      },\\r\\n      \"template\": {\\r\\n        \"content\": {\\r\\n          \"$ref\": \"extension/dt/dtTemplate.html\"\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}';});\n\n","\ndefine('css!oj-sample/tooltip/tooltip-styles',[],function(){});\n","/**\n  Copyright (c) 2019, Oracle and/or its affiliates.\n  The Universal Permissive License (UPL), Version 1.0\n*/\ndefine('oj-sample/tooltip/loader',['ojs/ojcomposite', 'text!./tooltip-view.html', './tooltip-viewModel', 'text!./component.json', 'css!./tooltip-styles.css'],\n  function (Composite, view, viewModel, metadata) {\n    Composite.register('oj-sample-tooltip', {\n      view: view,\n      viewModel: viewModel,\n      metadata: JSON.parse(metadata)\n    });\n  }\n);\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('oj-sample-tooltip:not(.oj-complete){\\r\\n  visibility: hidden;\\r\\n}\\r\\n\\r\\noj-sample-tooltip{\\r\\n  display: inline-flex;\\r\\n}\\r\\n\\r\\noj-sample-tooltip .tooltipDesignTimeMarker{\\r\\n  min-height:20px;\\r\\n  min-width:200px;\\r\\n  background-color: #dce3e4;\\r\\n  color:#5F5F5F;\\r\\n  opacity: 0.5;\\r\\n  text-align: center;\\r\\n  margin: auto;\\r\\n  padding:4px\\r\\n}');\n"]}